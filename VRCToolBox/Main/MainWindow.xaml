<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:VRCToolBox"
        xmlns:Main="clr-namespace:VRCToolBox.Main" x:Class="VRCToolBox.MainWindow"
        xmlns:c="clr-namespace:VRCToolBox.Common"
        xmlns:s="clr-namespace:VRCToolBox.Settings"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        mc:Ignorable="d"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="VRCToolBox" Height="900" Width="1434" WindowStartupLocation="CenterScreen" 
        ui:TitleBar.IsIconVisible="True" Icon="/Images/icon_128x128.png">
    <Window.DataContext>
        <Main:MainWindowViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <Main:TypeToViewConverter x:Key="TypeToViewConverter"/>
        <Style TargetType="Button" BasedOn="{StaticResource ButtonBase}" x:Key="TopButtonStyle">
            <Setter Property="VerticalAlignment"   Value="Center"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="Width" Value="128"/>
            <Setter Property="Height" Value="64"/>
        </Style>
    </Window.Resources>
    <ui:NavigationView x:Name="C_Navi" PaneDisplayMode="Auto" IsBackButtonVisible="Collapsed" IsBackEnabled="False" AlwaysShowHeader="True" 
                       IsPaneToggleButtonVisible="False" OpenPaneLength="150" IsSettingsVisible="False"
                       MenuItemsSource="{Binding MenuItems}" SelectedItem="{Binding SelectedNaviItem, Mode=TwoWay}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="8*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid>
                <Grid Grid.Row="0" Grid.Column="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <UniformGrid Grid.Row="0" Grid.Column="1" Columns="4" Rows="1">
                        <Button Content="Join通知" Click="Button_Click" Style="{StaticResource TopButtonStyle}"/>
                        <Button Content="ログの移動" Style="{StaticResource TopButtonStyle}"
                                Command="{Binding MoveAndEditLogAsyncCommand}" IsEnabled="{Binding MoveAndEditLogAsyncCanExecute}"/>
                        <Button Content="写真の移動" Style="{StaticResource TopButtonStyle}"
                                Command="{Binding MovePhotoAsyncCommand}" IsEnabled="{Binding MovePhotoAsyncCanExecute}"/>
                        <Button Content="{Binding ButtonText}" Style="{StaticResource TopButtonStyle}" Command="{Binding MakeUnityBackupAsyncCommand}"/>
                    </UniformGrid>
                </Grid>
                <Image Margin="0,5,5,0" Source="/Images/Information.png" Stretch="Fill" MouseLeftButtonDown="Image_MouseLeftButtonDown" HorizontalAlignment="Right" VerticalAlignment="Top" Width="24" Height="24"/>
                <Image Margin="0,-1,20,0" Source="/Images/Annotation.png" Stretch="Fill" x:Name="Annotation" Visibility="{Binding CheckUpdateExists.Result, Converter={StaticResource BooleanToVisibilityConverter}}" ToolTip="アップデートがあります。"
               MouseLeftButtonDown="Image_MouseLeftButtonDown" Width="20" Height="20" HorizontalAlignment="Right" VerticalAlignment="Top"/>
            </Grid>
            <ContentControl Grid.Row="1" Content="{Binding SelectedNaviItem.Tag, Converter={StaticResource TypeToViewConverter}}">
            </ContentControl>
        </Grid>
    </ui:NavigationView>
</Window>
